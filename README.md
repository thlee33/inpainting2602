# inpainting2602

위성 지도의 보안 마스킹 구역, AI 인페인팅으로 더 자연스럽게 위장하기     

1. 프로젝트 배경

위성 지도를 활용하다 보면 보안 시설물 경계에 덧칠된 '어색한 마스킹' 구역을 자주 보게 됩니다. 디지털 트윈이나 3D 공간 분석 시 시각적 불연속성을 유발하는 이 문제를 해결하기 위해, 최신 생성형 AI 기술을 활용하여 주변 지형과 조화로운 숲으로 복원(?)하는 코드를 만들었습니다. 
 
  
2. 왜 실행할 때마다 결과가 다른가요? (Probabilistic AI)  

사용된 Stable Diffusion 모델은 확률 기반의 확산(Diffusion) 모델입니다.  

노이즈 기반 생성: AI는 무작위 노이즈에서 시작해 이미지를 찾아갑니다. 이때 시작되는 노이즈의 초기 상태(Seed)가 고정되지 않으면 실행할 때마다 숲의 모양, 나무의 배치, 밀도가 조금씩 달라집니다.  
  
다양한 후보군: 오히려 고정되지 않은 결과 덕분에, 여러 번 실행하여 가장 자연스러운(주변 지형과 잘 섞이는) 결과물을 선택할 수 있다는 장점이 있습니다.  
  
  
3. 핵심 워크플로우 (Technical Pipeline)  
  
① GIS 데이터 정렬 (Preprocessing)  

위성 영상(org.tiff)과 보안 구역 폴리곤(coverage.gpkg)을 하나로 합칩니다. rasterio의 Affine 변환 정보를 활용해 폴리곤 경계를 픽셀 좌표로 변환하고, 이를 AI가 이해할 수 있는 512x512 크기의 이진 마스크로 리사이징합니다.  
    
   
③ 프롬프트 엔지니어링 (Contextual Prompting)  
  
단순한 "숲"이 아니라 **"Extremely high resolution satellite photography of a dense lush green forest, highly detailed trees"**와 같이 위성 사진 특유의 질감을 강조하는 프롬프트를 사용하여 AI가 '그림'이 아닌 '사진'처럼 그리도록 유도했습니다.  
  
4. 결과 및 시사점  
  
복원 품질: 기존보다 더 자연스러운 마스킹 영역을 채울 수 있습니다.   

GIS 무결성: 복원된 이미지는 원본의 지리 정보(CRS, Transform)를 그대로 유지하므로 QGIS 등 GIS 툴에서 즉시 레이어로 활용 가능합니다.  

5. 마치며

생성형 AI가 GIS 전문가들에게 도움이 될 수 있습니다.  

